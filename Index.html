<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Success Sprout - Your AI-Powered Education & Career Platform. Get personalized learning paths and career guidance for just â‚¹1.">
    <meta name="keywords" content="education, career guidance, AI learning, online courses, career development, personalized learning">
    <meta name="author" content="Success Sprout">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Success Sprout - AI-Powered Education & Career Platform">
    <meta property="og:description" content="Transform your education and career journey with AI-powered personalized learning paths and career guidance.">
    <meta property="og:image" content="/images/success-sprout-og.png">
    <meta property="og:url" content="https://successsprout.com">
    <meta name="theme-color" content="#667eea">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains">
    
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://www.paypal.com">
    <link rel="dns-prefetch" href="https://www.paypal.com">
    
    <!-- Defer non-critical CSS -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap"></noscript>
    
    <title>Success Sprout - AI-Powered Education & Career Platform</title>
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AWxKauC9xzSCydV4Te33Lfl9hFU7Ck2oAMEmR7La0EgPQxCsB5vAXbW0iJKXVPRgvAk84xsGHaQ9HgM3&currency=INR&intent=capture"></script>
    <!-- Retry registration function -->
    <script>
        function retryRegistration() {
            const paymentStatus = document.getElementById('payment-status');
            paymentStatus.style.display = 'none';
            document.getElementById('registrationForm').style.display = 'flex';
            document.querySelector('#registrationForm .cta-button').disabled = false;
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {

            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            overflow-x: hidden;
            background-color: #121212;
        }

        .header {
            background: #000000;
            color: #ffffff;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(255,215,0,0.1);
            border-bottom: 1px solid #333;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: #1a1a1a;
            border: 2px solid #ffd700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd700;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #ffd700;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            padding-bottom: 5px;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: #ffd700;
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links a:hover {
            
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .nav-links .highlight-btn {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nav-links .highlight-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .hero {
            background: #000000;
            color: #ffffff;
            padding: 150px 2rem 100px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid #333;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="2" fill="%23ffd700" opacity="0.05"/></svg>');
            animation: float 20s linear infinite;
        }

        @keyframes float {
            from { transform: translateY(0); }
            to { transform: translateY(-100px); }
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 1s;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.95;
            animation: fadeInUp 1s 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

            .price-tag {
            display: inline-block;
            background: #1a1a1a;
            color: #ffd700;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 1rem 0;
            border: 2px solid #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.2);
            animation: pulse 2s infinite;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        .price-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(255,215,0,0.3);
            background: #000000;
        }

        .price-tag:active {
            transform: translateY(1px);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }        .cta-button {
            display: inline-block;
            background: #1a1a1a;
            color: #ffd700;
            padding: 1rem 3rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 1rem;
            transition: all 0.3s ease;
            border: 2px solid #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.1);
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(255,215,0,0.2);
            background: #ffd700;
            color: #000000;
            text-shadow: none;
        }

        .registration-form {
            max-width: 400px;
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .registration-form input {
            padding: 12px 15px;
            border: 2px solid #333;
            border-radius: 25px;
            background: #000000;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .registration-form input:focus {
            outline: none;
            border-color: #ffd700;
            background: #1a1a1a;
            box-shadow: 0 0 15px rgba(255,215,0,0.1);
        }

        .registration-form input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .status-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            display: none;
            font-weight: 500;
            backdrop-filter: blur(5px);
        }

        .status-message.success {
            background: rgba(0, 0, 0, 0.7);
            color: #ffd700;
            border: 1px solid #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .status-message.error {
            background: rgba(0, 0, 0, 0.7);
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
            text-shadow: 0 0 10px rgba(255,107,107,0.3);
        }

        #toggleFormBtn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        #toggleFormBtn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .login-form {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .login-form.visible {
            opacity: 1;
        }

        #paypal-button-container {
            margin: 20px auto;
            max-width: 300px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.1);
        }

        .features {
            max-width: 1200px;
            margin: 80px auto;
            padding: 0 2rem;
            background: #000000;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #ffd700;
            text-shadow: 0 0 15px rgba(255,215,0,0.3);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: #1a1a1a;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255,215,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid #333;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 0 40px rgba(255,215,0,0.2);
            border-color: #ffd700;
            background: #0a0a0a;
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: #000000;
            border: 2px solid #ffd700;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .feature-card p {
            color: #e0e0e0;
            line-height: 1.8;
        }

        .ai-badge {
            display: inline-block;
            background: #1a1a1a;
            color: #ffd700;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            border: 1px solid #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .benefits {
            background: #000000;
            padding: 80px 2rem;
            margin-top: 80px;
            border-top: 1px solid #333;
            border-bottom: 1px solid #333;
            position: relative;
            overflow: hidden;
        }

        .benefits::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="2" fill="%23ffd700" opacity="0.02"/></svg>');
            animation: float 20s linear infinite;
        }

        .benefits-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .benefits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .benefit-item {
            background: #1a1a1a;
            padding: 1.5rem;
            border-radius: 15px;
            display: flex;
            align-items: start;
            gap: 1rem;
            box-shadow: 0 0 20px rgba(255,215,0,0.1);
            border: 1px solid #333;
            transition: all 0.3s ease;
        }

        .benefit-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 30px rgba(255,215,0,0.2);
            border-color: #ffd700;
            background: #0a0a0a;
        }

        .check-icon {
            width: 30px;
            height: 30px;
            background: #000000;
            border: 2px solid #ffd700;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd700;
            font-weight: bold;
            flex-shrink: 0;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .cta-section {
            background: #000000;
            color: #ffffff;
            padding: 80px 2rem;
            text-align: center;
            border-top: 1px solid #333;
            border-bottom: 1px solid #333;
        }

        .cta-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .cta-section h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .cta-section p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .footer {
            background: #000000;
            color: #ffffff;
            padding: 2rem;
            text-align: center;
            border-top: 1px solid #333;
        }

        .footer p {
            opacity: 0.8;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .nav-links {
                display: none;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">SS</div>
                Success Sprout
            </div>
            <ul class="nav-links">
                <li><a href="#features">Features</a></li>
                <li><a href="pages/courses.html">Courses</a></li>
                <li><a href="pages/freelancing.html">Freelancing</a></li>
                <li><a href="pages/scholarships.html">Scholarships</a></li>
                <li><a href="pages/recruiter.html">Recruiters</a></li>
                <li><a href="#" id="loginBtn">Login</a></li>
                <li><a href="#join" class="highlight-btn">Join Now</a></li>
                <li><a href="recruiter/login.html" id="recruiterLoginBtn">Recruiter Login</a></li>
            </ul>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>Welcome to Success Sprout</h1>
            <p>Your AI-Powered Journey to Academic Excellence and Career Success Starts Here</p>
            <button type="button" class="price-tag" id="joinNowBtn" onclick="handleJoinButtonClick()">
                Join for Just â‚¹1
                <span style="display: block; font-size: 0.8rem; margin-top: 5px; opacity: 0.9;">Click to proceed â†’</span>
            </button>
            <p style="font-size: 1rem; margin-top: 1rem;">Unlock unlimited access to AI-powered recommendations</p>
            
            <!-- PayPal button container -->
            <div id="paypal-button-container" style="display: none; margin: 20px auto; max-width: 300px;"></div>
            
            <!-- Payment status messages -->
            <div id="payment-status" style="display: none; margin-top: 20px; padding: 15px; border-radius: 10px; text-align: center;">
                <div class="payment-message"></div>
            </div>
            <div id="payment-loading" style="display: none; text-align: center; margin-top: 15px;">
                <p>Processing payment...</p>
            </div>
            <div id="registration-status" class="status-message"></div>

            <!-- Login/Registration Toggle -->
            <div style="margin-bottom: 20px; text-align: center;">
                <button id="toggleFormBtn" class="cta-button" style="background: rgba(255,255,255,0.2); margin: 0 5px;" onclick="toggleForm()">
                    Switch to Login
                </button>
            </div>

            <!-- Registration Form -->
            <div class="registration-form" id="registrationForm">
                <input type="text" id="name" placeholder="Full Name" required>
                <input type="email" id="email" placeholder="Email Address" required>
                <input type="password" id="password" placeholder="Password" required>
                <input type="tel" id="phoneNumber" placeholder="Phone Number" required>
                <button class="cta-button" onclick="handleRegistration()">Get Started Now</button>
            </div>

            <!-- Login Form -->
            <div class="registration-form" id="loginForm" style="display: none;">
                <input type="email" id="loginEmail" placeholder="Email Address" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button class="cta-button" onclick="handleLogin()">Login</button>
            </div>
        </div>
    </section>
    
    <script>
        // Open registration form when CTA is clicked
        function openRegistrationFromCTA() {
            const registrationForm = document.getElementById('registrationForm');
            const toggleFormBtn = document.getElementById('toggleFormBtn');
            const paymentStatus = document.getElementById('payment-status');

            // Ensure registration form is visible
            if (registrationForm) {
                registrationForm.style.display = 'flex';
                // Hide any payment status message
                if (paymentStatus) paymentStatus.style.display = 'none';
                // Scroll and focus first input
                registrationForm.scrollIntoView({ behavior: 'smooth', block: 'center' });
                const firstInput = registrationForm.querySelector('input');
                if (firstInput) firstInput.focus();
            }

            // If toggle button exists, ensure it's set to registration state label
            if (toggleFormBtn) {
                toggleFormBtn.textContent = 'Switch to Login';
            }
        }

        // Start the join flow: if already registered, show PayPal; else open registration and mark to auto-start payment
        function startJoinFlow() {
            // If currentUser exists (already registered), show PayPal immediately
            if (currentUser && currentUser.userId) {
                // Render PayPal UI
                const paypalBtn = initPayPalButton();
                if (paypalBtn) paypalBtn.render('#paypal-button-container');
                showPaymentUI();
                return;
            }

            // Not registered yet: open registration form and set a flag to auto-start payment after registration
            window.__autoStartPayment = true;
            openRegistrationFromCTA();
        }

        let currentUser = null;

        // Modal functionality
        const modal = document.getElementById('loginModal');
        const loginBtn = document.getElementById('loginBtn');
        const closeBtn = document.getElementsByClassName('close')[0];
        const modalLink = document.querySelector('.modal-link');

        // Open modal
        loginBtn.onclick = function(e) {
            e.preventDefault();
            modal.style.display = 'block';
            document.getElementById('loginEmail').focus();
        }

        // Close modal
        closeBtn.onclick = function() {
            modal.style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Modal link to registration
        modalLink.onclick = function(e) {
            modal.style.display = 'none';
            document.getElementById('registrationForm').scrollIntoView({ behavior: 'smooth' });
        }

        // Handle modal login
        async function handleModalLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginModalEmail').value;
            const password = document.getElementById('loginModalPassword').value;
            const errorDiv = document.getElementById('loginError');
            const submitBtn = document.querySelector('.modal-submit-btn');
            
            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Logging in...';
                
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    // Store auth data
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('userId', data.userId);
                    localStorage.setItem('userName', data.name);
                    
                    // Show success message
                    submitBtn.textContent = 'Success! Redirecting...';
                    submitBtn.style.background = '#4caf50';

                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = '/dashboard.html';
                    }, 1500);
                } else {
                    throw new Error(data.message || 'Login failed');
                }
            } catch (error) {
                errorDiv.textContent = error.message || 'Login failed. Please check your credentials.';
                errorDiv.style.display = 'block';
                submitBtn.disabled = false;
                submitBtn.textContent = 'Login';
            }
        }

        // Check if user is already logged in
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            if (token) {
                loginBtn.textContent = 'Dashboard';
                loginBtn.href = '/dashboard.html';
            }
        });
        let isLoginForm = false;

        function toggleForm() {
            isLoginForm = !isLoginForm;
            const registrationForm = document.getElementById('registrationForm');
            const loginForm = document.getElementById('loginForm');
            const toggleBtn = document.getElementById('toggleFormBtn');
            const paypalContainer = document.getElementById('paypal-button-container');
            const joinNowBtn = document.getElementById('joinNowBtn');

            if (isLoginForm) {
                registrationForm.style.display = 'none';
                loginForm.style.display = 'flex';
                toggleBtn.textContent = 'Switch to Registration';
                paypalContainer.style.display = 'none';
                joinNowBtn.style.display = 'none';
            } else {
                registrationForm.style.display = 'flex';
                loginForm.style.display = 'none';
                toggleBtn.textContent = 'Switch to Login';
                joinNowBtn.style.display = 'block';
            }
        }

        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const statusDiv = document.getElementById('registration-status');
            
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    // Store auth data
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('userId', data.userId);
                    localStorage.setItem('userName', data.name);
                    
                    // Show success message
                    statusDiv.innerHTML = 'Login successful! Redirecting to dashboard...';
                    statusDiv.className = 'status-message success';
                    statusDiv.style.display = 'block';

                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = '/dashboard.html';
                    }, 1500);
                } else {
                    throw new Error(data.message || 'Login failed');
                }
            } catch (error) {
                statusDiv.innerHTML = error.message || 'Login failed. Please check your credentials.';
                statusDiv.className = 'status-message error';
                statusDiv.style.display = 'block';
            }
        }
        // Trigger PayPal payment when price-tag is clicked
        // Handle join button click
        function handleJoinButtonClick() {
            console.log('Join button clicked'); // Debug log
            
            const joinNowBtn = document.getElementById('joinNowBtn');
            const paypalContainer = document.getElementById('paypal-button-container');
            const registrationForm = document.getElementById('registrationForm');
            const paymentStatus = document.getElementById('payment-status');
            
            if (!paypalContainer || !registrationForm) {
                console.error('Required elements not found');
                return;
            }

            // Show registration form first
            registrationForm.style.display = 'flex';
            
            // Hide join button
            joinNowBtn.style.display = 'none';

            // Scroll to registration form
            registrationForm.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // Show success message
            paymentStatus.style.display = 'block';
            paymentStatus.style.background = 'rgba(0, 0, 0, 0.7)';
            paymentStatus.style.border = '1px solid #ffd700';
            paymentStatus.querySelector('.payment-message').innerHTML = 
                '<p style="color: #ffd700;">Please complete the registration to proceed with payment</p>';
        }

        // Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded'); // Debug log
            initJoinButton();
        });

        async function handleRegistration() {
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const phoneInput = document.getElementById('phoneNumber');
            const statusDiv = document.getElementById('registration-status');
            const submitBtn = document.querySelector('#registrationForm .cta-button');

            try {
                // Input validation
                if (!nameInput.value || !emailInput.value || !passwordInput.value || !phoneInput.value) {
                    throw new Error('Please fill in all fields');
                }

                if (!emailInput.value.includes('@')) {
                    throw new Error('Please enter a valid email address');
                }

                // Disable submit button and show loading state
                submitBtn.disabled = true;
                submitBtn.textContent = 'Processing...';
                
                const userData = {
                    name: nameInput.value,
                    email: emailInput.value,
                    password: passwordInput.value,
                    phoneNumber: phoneInput.value,
                    userType: 'user'
                };

                // Show loading state in payment status
                const paymentStatus = document.getElementById('payment-status');
                paymentStatus.style.display = 'block';
                paymentStatus.style.background = 'rgba(0,0,0,0.7)';
                paymentStatus.style.border = '2px solid #ffd700';
                paymentStatus.querySelector('.payment-message').innerHTML = `
                    <div style="padding: 20px;">
                        <p style="color: #ffd700;">Processing registration...</p>
                    </div>
                `;

                console.log('Sending registration request...'); // Debug log
                
                try {
                    // Use relative API paths (works with local server or deployed host)
                    // First check if server is running
                    const healthCheck = await fetch('/api/health').catch(() => null);
                    if (!healthCheck) {
                        throw new Error('Server is not running. Please try again later.');
                    }

                    const response = await fetch('/api/register', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(userData),
                        mode: 'cors',
                        credentials: 'same-origin'
                    });

                    if (!response.ok) {
                        let errorText = 'Registration failed';
                        try {
                            const errorData = await response.json();
                            errorText = errorData.message || JSON.stringify(errorData);
                        } catch (e) {
                            // ignore JSON parse errors
                        }
                        // show server error message in UI
                        const paymentStatusEl = document.getElementById('payment-status');
                        paymentStatusEl.style.display = 'block';
                        paymentStatusEl.className = 'status-message error';
                        paymentStatusEl.innerText = errorText;
                        console.error('Registration failed:', errorText);
                        return null;
                    }

                    console.log('Registration response received:', response.status); // Debug log
                    return response;

                } catch (error) {
                    console.error('Registration error:', error); // Debug log
                    const paymentStatusEl = document.getElementById('payment-status');
                    paymentStatusEl.style.display = 'block';
                    paymentStatusEl.className = 'status-message error';
                    if (!window.navigator.onLine) {
                        paymentStatusEl.innerText = 'You are offline. Please check your internet connection.';
                    } else {
                        // prefer actual error message when available
                        paymentStatusEl.innerText = error?.message || 'Server connection failed. Please try again in a few moments.';
                    }
                    return null;
                }

                const data = await response.json();

                if (response.ok) {
                    const data = await response.json();
                    currentUser = {
                        userId: data.userId,
                        token: data.token
                    };

                    // Show success message and a redirect-based Pay button
                    const paymentStatus = document.getElementById('payment-status');
                    paymentStatus.style.display = 'block';
                    paymentStatus.style.background = 'rgba(0,0,0,0.7)';
                    paymentStatus.style.border = '2px solid #ffd700';
                    paymentStatus.querySelector('.payment-message').innerHTML = `
                        <div style="padding: 20px; text-align:center;">
                            <h3 style="color: #ffd700; margin-bottom: 10px;">Registration Successful! âœ¨</h3>
                            <p style="color: #ffffff;">Please proceed with the payment to activate your account.</p>
                            <p style="margin-top: 10px; font-size: 0.9em; color: #ffd700;">Amount: â‚¹1 only</p>
                            <button id="redirectPayBtn" class="cta-button" style="margin-top:12px;">Pay â‚¹1 Now</button>
                        </div>
                    `;

                    // Hide the inline PayPal container used for direct buttons
                    document.getElementById('paypal-button-container').style.display = 'none';

                    // Wire redirect button
                    setTimeout(() => {
                        const redirectBtn = document.getElementById('redirectPayBtn');
                        if (redirectBtn) {
                            redirectBtn.addEventListener('click', async function() {
                                try {
                                    redirectBtn.disabled = true;
                                    redirectBtn.textContent = 'Redirecting...';

                                    const resp = await fetch('/api/create-paypal-order', {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify({ userId: currentUser.userId, amount: '1.00', currency: 'INR' })
                                    });

                                    const body = await resp.json();
                                    if (!resp.ok) throw new Error(body.message || 'Failed to create order');

                                    if (body.approveUrl) {
                                        // Redirect the browser to PayPal approval URL
                                        window.location.href = body.approveUrl;
                                    } else {
                                        throw new Error('Approval URL missing from PayPal response');
                                    }
                                } catch (err) {
                                    console.error('Redirect payment error:', err);
                                    alert('Unable to start payment. Please try again later.');
                                    redirectBtn.disabled = false;
                                    redirectBtn.textContent = 'Pay â‚¹1 Now';
                                }
                            });
                        }
                    }, 200);
                    
                    // Store credentials for later login
                    localStorage.setItem('tempEmail', emailInput.value);
                    localStorage.setItem('tempPassword', passwordInput.value);
                } else {
                    throw new Error(data.message || 'Registration failed');
                }

                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Get Started Now';
            } catch (error) {
                console.error('Registration error:', error);
                const paymentStatus = document.getElementById('payment-status');
                paymentStatus.style.display = 'block';
                paymentStatus.style.background = 'rgba(0,0,0,0.7)';
                paymentStatus.style.border = '2px solid #ff6b6b';
                paymentStatus.querySelector('.payment-message').innerHTML = `
                    <div style="padding: 20px;">
                        <h3 style="color: #ff6b6b; margin-bottom: 10px;">Registration Failed</h3>
                        <p style="color: #ffffff;">${error.message}</p>
                        <button onclick="retryRegistration()" class="cta-button" style="margin-top: 15px;">Try Again</button>
                    </div>
                `;
                
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Get Started Now';
            }
        }

        // Handle PayPal SDK loading error
        window.addEventListener('error', function(e) {
            if (e.target.src && e.target.src.includes('paypal')) {
                document.getElementById('paypal-button-container').innerHTML = 
                    '<p style="color: red;">Payment system temporarily unavailable. Please try again later.</p>';
            }
        }, true);

        // Function to show payment UI
        function showPaymentUI() {
            const paypalContainer = document.getElementById('paypal-button-container');
            const registrationForm = document.getElementById('registrationForm');
            const paymentStatus = document.getElementById('payment-status');

            registrationForm.style.display = 'none';
            paypalContainer.style.display = 'block';
            paymentStatus.style.display = 'block';
            paymentStatus.style.background = 'rgba(0, 0, 0, 0.7)';
            paymentStatus.style.border = '1px solid #ffd700';
            paymentStatus.querySelector('.payment-message').innerHTML = 
                '<p style="color: #ffd700;">Please complete your payment of â‚¹1</p>';

            // Scroll to PayPal button
            paypalContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Initialize PayPal buttons
        function initPayPalButton() {
            if (typeof paypal !== 'undefined') {
                console.log('PayPal SDK loaded');
                return paypal.Buttons({
                    style: {
                        layout: 'vertical',
                        color:  'gold',
                        shape:  'pill',
                        label:  'pay'
                    },
                    createOrder: async function(data, actions) {
                        console.log('Creating PayPal order');
                        try {
                            // First ensure user is registered
                            if (!currentUser || !currentUser.userId) {
                                throw new Error('Please register first');
                            }

                            return actions.order.create({
                                purchase_units: [{
                                    amount: {
                                        value: '1.00',
                                        currency_code: 'INR'
                                    },
                                    description: 'Success Sprout Membership',
                                    custom_id: currentUser.userId
                                }]
                            });
                        } catch (error) {
                            console.error('Order creation error:', error);
                            const paymentStatus = document.getElementById('payment-status');
                            paymentStatus.style.background = 'rgba(0, 0, 0, 0.7)';
                            paymentStatus.style.border = '1px solid #ff6b6b';
                            paymentStatus.querySelector('.payment-message').innerHTML = 
                                `<p style="color: #ff6b6b;">${error.message}</p>`;
                            throw error;
                        }
                    },
            onApprove: function(data, actions) {
                document.getElementById('payment-loading').style.display = 'block';
                return actions.order.capture().then(async function(details) {
                    try {
                        console.log('Payment captured:', details);
                        
                        // Update payment status in backend
                        const response = await fetch('/api/payment-webhook', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                userId: currentUser.userId,
                                paymentId: details.id,
                                orderID: data.orderID
                            })
                        });

                        if (!response.ok) {
                            throw new Error('Payment verification failed');
                        }

                        // Show success message
                        const statusDiv = document.getElementById('registration-status');
                        statusDiv.innerHTML = `
                            <div style="background: rgba(0,0,0,0.7); padding: 20px; border-radius: 10px; border: 2px solid #ffd700;">
                                <h3 style="color: #ffd700; margin-bottom: 10px;">Payment Successful! ðŸŽ‰</h3>
                                <p>Welcome to Success Sprout!</p>
                                <p style="margin-top: 10px; font-size: 0.9em;">Redirecting to your dashboard...</p>
                            </div>
                        `;
                        statusDiv.className = 'status-message success';
                        statusDiv.style.display = 'block';

                        // Hide PayPal button
                        document.getElementById('paypal-button-container').style.display = 'none';

                        // Redirect to login after 2 seconds
                        setTimeout(() => {
                            window.location.href = '/login.html';
                        }, 2000);
                    } catch (error) {
                        console.error('Payment verification error:', error);
                        alert('Payment received but verification failed. Please contact support.');
                    }
                });
            },
            onError: function(err) {
                alert('There was an error processing your payment. Please try again.');
                console.error('PayPal Error:', err);
            }
        }).render('#paypal-button-container');
            } else {
                console.error('PayPal SDK not loaded'); // Debug log
            }
        }

        // Call initPayPalButton after SDK loads
        if (document.readyState === 'complete') {
            initPayPalButton();
        } else {
            window.addEventListener('load', initPayPalButton);
        }
    </script>

    <section class="features" id="features">
        <h2 class="section-title">Powered by Advanced AI Technology</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="ai-badge">AI POWERED</div>
                <div class="feature-icon">ðŸ“š</div>
                <h3>Smart Course Recommendations</h3>
                <p>Our AI analyzes your interests, goals, and learning style to recommend the perfect courses and programs tailored specifically for you. Get personalized learning paths that adapt to your progress.</p>
            </div>

            <div class="feature-card">
                <div class="ai-badge">AI POWERED</div>
                <div class="feature-icon">ðŸŽ“</div>
                <h3>Scholarship Finder</h3>
                <p>Discover government and private scholarships that match your profile. Our AI scans thousands of opportunities and alerts you to scholarships you're eligible for, maximizing your chances of funding.</p>
            </div>

            <div class="feature-card">
                <div class="ai-badge">AI POWERED</div>
                <div class="feature-icon">ðŸ’¼</div>
                <h3>Recruitment Platform</h3>
                <p>For recruiters: Find the perfect candidates with our AI-powered matching system. For students: Get matched with employers looking for your specific skills and qualifications.</p>
            </div>

            <div class="feature-card">
                <div class="ai-badge">EARN MONEY</div>
                <div class="feature-icon">ðŸ’°</div>
                <h3>Freelancing Opportunities</h3>
                <p>Start your freelancing journey with just â‚¹1! Access exclusive project listings, get matched with clients, and earn money while building your skills. Perfect for students looking to gain experience and income.</p>
            </div>
        </div>
    </section>

    <section class="benefits">
        <div class="benefits-content">
            <h2 class="section-title">Why Choose Success Sprout?</h2>
            <div class="benefits-list">
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Affordable Access</h4>
                        <p>Just â‚¹1 to unlock everything</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Personalized AI</h4>
                        <p>Recommendations unique to you</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>24/7 Availability</h4>
                        <p>Access anytime, anywhere</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Updated Database</h4>
                        <p>Latest courses & scholarships</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Career Support</h4>
                        <p>Connect with top recruiters</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Success Tracking</h4>
                        <p>Monitor your progress</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Earn While Learning</h4>
                        <p>Freelance projects & income</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="check-icon">âœ“</div>
                    <div>
                        <h4>Skill Development</h4>
                        <p>Real-world experience</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cta-section" id="join">
        <div class="cta-content">
            <h2>Ready to Transform Your Future?</h2>
            <p>Join thousands of students already using Success Sprout to achieve their dreams</p>
            <div class="price-tag">Limited Time Offer: â‚¹1 Only</div>
            <br><br>
            <a href="#" id="ctaJoinBtn" class="cta-button" onclick="startJoinFlow(); return false;">Join Success Sprout Today</a>
            <p style="font-size: 0.9rem; margin-top: 2rem; opacity: 0.9;">
                No hidden fees â€¢ Cancel anytime â€¢ Instant access
            </p>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Welcome Back!</h2>
            <form id="loginModalForm" onsubmit="handleModalLogin(event)">
                <div class="form-group">
                    <input type="email" id="loginModalEmail" placeholder="Email Address" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginModalPassword" placeholder="Password" required>
                </div>
                <button type="submit" class="modal-submit-btn">Login</button>
                <div id="loginError" class="error-message"></div>
            </form>
            <p class="modal-footer">
                Don't have an account? <a href="#join" class="modal-link">Register here</a>
            </p>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Success Sprout. All rights reserved.</p>
        <p style="margin-top: 0.5rem;">Empowering students with AI-driven education solutions</p>
    </footer>

    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #1a1a1a;
            margin: 15% auto;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            position: relative;
            animation: modalSlideDown 0.3s ease;
            border: 1px solid #333;
            box-shadow: 0 0 30px rgba(255,215,0,0.1);
        }

        @keyframes modalSlideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .close:hover {
            color: #333;
        }

        .modal h2 {
            color: #ffd700;
            margin-bottom: 1.5rem;
            text-align: center;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .modal .form-group {
            margin-bottom: 1rem;
        }

        .modal input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #333;
            border-radius: 5px;
            font-size: 1rem;
            background: #000000;
            color: #ffffff;
            transition: all 0.3s ease;
        }

        .modal input:focus {
            border-color: #ffd700;
            outline: none;
            box-shadow: 0 0 10px rgba(255,215,0,0.1);
        }

        .modal-submit-btn {
            width: 100%;
            padding: 0.8rem;
            background: #000000;
            color: #ffd700;
            border: 2px solid #ffd700;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .modal-submit-btn:hover {
            background: #ffd700;
            color: #000000;
            text-shadow: none;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,215,0,0.2);
        }

        .modal-footer {
            margin-top: 1rem;
            text-align: center;
            color: #e0e0e0;
        }

        .modal-link {
            color: #ffd700;
            text-decoration: none;
            text-shadow: 0 0 10px rgba(255,215,0,0.3);
            transition: all 0.3s ease;
        }

        .modal-link:hover {
            text-decoration: none;
            color: #ffffff;
            text-shadow: 0 0 15px rgba(255,215,0,0.5);
        }
    </style>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.feature-card, .benefit-item').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s, transform 0.6s';
            observer.observe(el);
        });
    </script>
<script>
// Recruiter Login button logic
document.addEventListener('DOMContentLoaded', function() {
    var recruiterLoginBtn = document.getElementById('recruiterLoginBtn');
    if (recruiterLoginBtn) {
        recruiterLoginBtn.addEventListener('click', function(e) {
            e.preventDefault();
            // If already logged in as recruiter, redirect to dashboard
            if (localStorage.getItem('recruiterToken')) {
                window.location.href = 'recruiter/dashboard.html';
            } else {
                window.location.href = 'recruiter/login.html';
            }
        });
    }
});
</script>
<!-- Site utilities (toasts, quick-add, api base) -->
<script src="/js/site.js" defer></script>
<script>
    // Allow overriding API base via global variable (Vercel/Vhost can replace during deploy)
    window.API_BASE = window.API_BASE || '';
</script>
</body>
</html>